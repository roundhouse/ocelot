var App,MobileCheck,WaveControls,bind=function(fn,me){return function(){return fn.apply(me,arguments)}};MobileCheck=function(){function MobileCheck(){return this.Windows=bind(this.Windows,this),this.Opera=bind(this.Opera,this),this.iOS=bind(this.iOS,this),this.BlackBerry=bind(this.BlackBerry,this),this.Android=bind(this.Android,this),console.log("MobileCheck"),this.isMobile=this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows(),this.isMobile}return MobileCheck.prototype.Android=function(){return navigator.userAgent.match(/Android/i)},MobileCheck.prototype.BlackBerry=function(){return navigator.userAgent.match(/BlackBerry/i)},MobileCheck.prototype.iOS=function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},MobileCheck.prototype.Opera=function(){return navigator.userAgent.match(/Opera Mini/i)},MobileCheck.prototype.Windows=function(){return navigator.userAgent.match(/IEMobile/i)},MobileCheck}(),App=function(){function App(){this.randoColor=bind(this.randoColor,this),this.rbgColor=bind(this.rbgColor,this),this.modifyColor=bind(this.modifyColor,this),this.animate=bind(this.animate,this),this.Lissajou=bind(this.Lissajou,this),this.desktopControls=bind(this.desktopControls,this),this.touchControls=bind(this.touchControls,this),this.init=bind(this.init,this),this.createVars=bind(this.createVars,this),this.createVars(),this.init()}return App.prototype.createVars=function(){return this.curve=document.getElementById("curve"),this.curve,this.alpha=1,this.beta=1,this.phi=0,this.dphi=Math.PI/120,this.w=window.innerWidth,this.h=window.innerHeight,this.resizeTimer,this.paused=!1,this.colorCount=0,this.strokeWeight=2,this.mouseDown=!1,this.colorCounter=0,this.colorspeed=1,this.blur=0,this.rbg=["#C00404","#0594F2","#3FA61E"],this.mobile=new MobileCheck,this.controls=new WaveControls,window.addEventListener("resize",function(_this){return function(){return _this.w=window.innerWidth,_this.h=window.innerHeight}}(this))},App.prototype.init=function(){return null!==this.mobile.isMobile?(this.mobile=!0,this.controls.hide(),this.touchControls()):(this.mobile=!1,this.desktopControls()),this.tick=setInterval(this.animate,4)},App.prototype.touchControls=function(){return this.touchX,this.touchY,this.mobile_force=document.getElementById("mobile_force"),window.addEventListener("touchmove",function(_this){return function(evt){var a,b,newStroke;return b=Math.round(.1*(_this.w/2-evt.changedTouches[0].clientX)),a=Math.round(.1*(_this.h/2-evt.changedTouches[0].clientY)),0===a&&(a=1),0===b&&(b=1),_this.beta=b,_this.alpha=a,newStroke=Math.round(2*(1-evt.changedTouches[0].force)),_this.curve.setAttributeNS(null,"stroke-width",newStroke),_this.mobile_force.innerHTML=newStroke}}(this))},App.prototype.desktopControls=function(){return window.addEventListener("mousemove",function(_this){return function(evt){var a,b;return _this.paused===!1&&evt.shiftKey?(_this.beta=Math.round((evt.pageX-_this.w/2)/10),_this.alpha=Math.round((evt.pageY-_this.h/2)/10)):_this.paused===!1&&_this.mouseDown?(b=Math.round(evt.movementX),a=Math.round(evt.movementY),0===a&&(a=1),0===b&&(b=1),_this.beta=b,_this.alpha=a):void 0}}(this)),window.addEventListener("mousedown",function(_this){return function(evt){return _this.mouseDown=!0}}(this)),window.addEventListener("mouseup",function(_this){return function(evt){return _this.mouseDown=!1}}(this)),window.addEventListener("keydown",function(_this){return function(evt){return 32===evt.keyCode&&(_this.paused===!1?(_this.paused=!0,_this.controls.openWindow()):(_this.paused=!1,_this.controls.closeWindow())),37===evt.keyCode&&_this.beta--,39===evt.keyCode&&_this.beta++,38===evt.keyCode&&_this.alpha++,40===evt.keyCode&&_this.alpha--,79===evt.keyCode&&(_this.colorspeed=_this.colorspeed-5,_this.colorspeed<1&&(_this.colorspeed=1)),80===evt.keyCode&&(_this.colorspeed=_this.colorspeed+5,console.log(_this.colorspeed)),219===evt.keyCode&&(_this.strokeWeight--,_this.strokeWeight<1&&(_this.strokeWeight=1),_this.curve.setAttributeNS(null,"stroke-width",_this.strokeWeight)),221===evt.keyCode?(_this.strokeWeight++,_this.curve.setAttributeNS(null,"stroke-width",_this.strokeWeight)):void 0}}(this))},App.prototype.Lissajou=function(a,b,phi){var dt,max,str,x;for(this.mobile===!1&&this.controls.updateWaveData(a,b,phi,this.w,this.h,this.strokeWeight,this.colorspeed),dt=Math.PI/(this.w/2),str="M",max=2*Math.PI,x=0;max>=x;)str+=this.w/2+(this.w/2-100)*Math.sin(a*x)+" "+(this.h/2+(this.h/2-50)*Math.cos(b*x+phi))+" ",x+=dt;return this.curve.setAttributeNS(null,"d",str)},App.prototype.animate=function(){return this.paused===!1?(this.Lissajou(this.alpha,this.beta,this.phi),this.phi+=this.dphi,this.phi%=2*Math.PI,this.modifyColor()):void 0},App.prototype.modifyColor=function(){return this.curve.setAttributeNS(null,"stroke",this.rbgColor())},App.prototype.rbgColor=function(){return this.colorCounter++,this.colorspeed<this.colorCounter&&(this.colorCounter=0,this.colorCount+=1,this.colorCount>this.rbg.length-1&&(this.colorCount=0)),this.rbg[this.colorCount]},App.prototype.randoColor=function(){var r;return r=16777215*Math.random(),"#"+Math.floor(r).toString(16)},App}(),window.onload=function(_this){return function(){var _app;return _app=new App}}(this),WaveControls=function(){function WaveControls(){this.updateWaveData=bind(this.updateWaveData,this),this.closeWindow=bind(this.closeWindow,this),this.openWindow=bind(this.openWindow,this),this.hide=bind(this.hide,this),console.log("new contols"),this.controlWindow=document.getElementById("controls"),this.instructs=document.getElementById("instruct"),this.aTxt=document.getElementById("alpha_value"),this.bTxt=document.getElementById("beta_value"),this.pTxt=document.getElementById("phi_value"),this.lTxt=document.getElementById("length_value"),this.hTxt=document.getElementById("height_value"),this.sTxt=document.getElementById("stroke_value"),this.cTxt=document.getElementById("color_value"),this.eTxt=document.getElementById("equation_value")}return WaveControls.prototype.hide=function(){return this.instructs.className="hidden",this.controlWindow.className="hidden"},WaveControls.prototype.openWindow=function(){return this.controlWindow.className="open"},WaveControls.prototype.closeWindow=function(){return this.controlWindow.className=""},WaveControls.prototype.updateWaveData=function(a,b,p,l,h,s,c){return this.aTxt.innerHTML=a,this.bTxt.innerHTML=b,this.pTxt.innerHTML=p.toFixed(3),this.lTxt.innerHTML=l+"px",this.hTxt.innerHTML=h+"px",this.sTxt.innerHTML=s+"px",this.cTxt.innerHTML=c+"ms",this.eTxt.innerHTML="f(t)=sin("+a+"t) + cos("+b+"t + "+p.toFixed(1)+" &Pi;)"},WaveControls}();